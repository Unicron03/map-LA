<!DOCTYPE html>
<html>
<head>
    <title>Map Link's Awakening</title>

    <link rel="stylesheet" href="css/leaflet.css" />
    <link rel="stylesheet" href="css/index.css">

    <script src="scripts/markerCat.js"></script>

    <style>
        #map {
            height: 800px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="panel">
        <div class="panel-flag">
            <img src="img/icon-silhuet.png" alt="icon-silhuet"/>
            <button onclick="adjustPanelHeight()" style="background: none; border: none; position: absolute; right: 0;">
                <img src="img/icon-reduce.png" alt="icon-reduce"/>
            </button>

            <h2 class="subtitle">Zelda: Link's Awakening Interactive Map</h2>
        </div>

        <div class="panel-controls">
            <br><a>Cacher les points marqués</a>
            <br><a onclick="disableAllMarkers()">Déselectionner toutes les catégories</a>
            <br><a onclick="enableAllMarkers()">Sélectionner toutes les catégories</a>
        </div>

        <div class="panel-icons" id="panelIcons">
        </div>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        var map = L.map('map', {
            zoomSnap: 1, // Zoom par paliers entiers
            zoomDelta: 1 // Contrôle la vitesse du zoom (facultatif)
        });

        // Définition des limites avec des bords latéraux
        var southWest = L.latLng(-77, -200); // coordonnées du coin inférieur gauche
        var northEast = L.latLng(77, 200);   // coordonnées du coin supérieur droit
        var bounds = L.latLngBounds(southWest, northEast);

        // Ajout de la couche de tuiles
        L.tileLayer("http://localhost:8000/imgUp/{z}/{x}/{y}.png", {
            attribution: "",
            minZoom: 0,
            maxZoom: 4,
            noWrap: true // Empêche la répétition des tuiles horizontalement
        }).addTo(map);

        // Centrer la vue de la carte
        map.setView([0, 0], 2);

        // Appliquer les limites à la carte
        map.setMaxBounds(bounds);
        map.on('drag', function() {
            map.panInsideBounds(bounds, { animate: false });
        });

        var Dungeons = L.icon({iconUrl: 'img/markers/dungeon.png', iconSize: [32, 32]});

        function addMarkersToMap(x, y, iconUrl, popUp) {
            L.marker([x+70, y-179], {icon: iconUrl}).bindPopup(popUp).addTo(map);
        }

        addMarkersToMap(256, 256, Dungeons, "Wind Fish's Egg")
    </script>
</body>
</html>

<!-- NE PAS OUBLIER DE LANCER SERVEUR : python -m http.server -->